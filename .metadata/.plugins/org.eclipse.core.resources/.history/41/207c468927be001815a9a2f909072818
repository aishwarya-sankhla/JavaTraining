package com.training;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.HashSet;


public class IoHandling {
	
	private static final int defaultQuant = 0;
	
	public HashSet<Item> readFromText(File file){
		HashSet<Item> itemSet = new HashSet<>();
		BufferedReader reader = null;
		try {
			reader = new BufferedReader(new FileReader(file));
			
			String itemAsString;
			while((itemAsString = reader.readLine())!=null){
				
				String[] items = itemAsString.split(",");
				switch (items[0]) {
				case "furniture":
					Item furniture = new Furniture(items[1],Float.parseFloat(items[2]),defaultQuant); 
					itemSet.add(furniture);
					break;
				case "car":
					Item car = new Car(items[1],Float.parseFloat(items[2]),defaultQuant); 
					itemSet.add(car);
					break;
				case "fan":
					Item fan = new Car(items[1],Float.parseFloat(items[2]),defaultQuant); 
					itemSet.add(fan);
					break;
				case "utensils":
					Item utensils = new Car(items[1],Float.parseFloat(items[2]),defaultQuant); 
					itemSet.add(utensils);
					break;
				default:
					break;
				}
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
		finally {
			try {
				reader.close();
			} catch (IOException e) {
				e.printStackTrace();
			}
		}
		return itemSet;
	}
}
